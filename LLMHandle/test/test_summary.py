import sys
import os
from concurrent.futures import ThreadPoolExecutor, as_completed

# æ·»åŠ é¡¹ç›®æ ¹ç›®å½•
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), "..")))

from ai_slave.summary_master import Summary_Master

text = """
åœ¨é¦™æ¸¯é£˜æ‰¬äº†150å¤šå¹´çš„è‹±å›½ç±³å­—æ——æœ€åä¸€æ¬¡åœ¨è¿™é‡Œé™è½åï¼Œæ¥è½½æŸ¥å°”æ–¯ç‹å­å’Œç¦»ä»»æ¸¯ç£å½­å®šåº·å›å›½çš„è‹±å›½çš‡å®¶æ¸¸è½®â€œä¸åˆ—é¢ å°¼äºšâ€å·é©¶ç¦»ç»´å¤šåˆ©äºšæ¸¯æ¹¾â€”â€”è¿™æ˜¯è‹±å›½æ’¤ç¦»é¦™æ¸¯çš„æœ€åæ—¶åˆ»ã€‚
è‹±å›½çš„å‘Šåˆ«ä»ªå¼æ˜¯30æ—¥ä¸‹åˆåœ¨æ¸¯å²›åŠå±±ä¸Šçš„æ¸¯ç£åºœï¼ˆé¦™æ¸¯ç¤¼å®¾åºœï¼‰æ‹‰å¼€åºå¹•çš„ã€‚åœ¨è’™è’™ç»†é›¨ä¸­ï¼Œæœ«ä»»æ¸¯ç£å‘Šåˆ«äº†è¿™ä¸ªæ›¾å±…ä½äº†äºŒåäº”ä»»æ¸¯ç£çš„åº­é™¢ã€‚
4æ—¶30åˆ†ï¼Œé¢è‰²å‡é‡çš„å½­å®šåº·æ³¨è§†ç€æ¸¯ç£æ——å¸œåœ¨â€œæ—¥è½ä½™éŸ³â€çš„å·è§’å£°ä¸­é™ä¸‹æ——æ†ã€‚æ ¹æ®ä¼ ç»Ÿï¼Œæ¯ä¸€ä½æ¸¯ç£ç¦»ä»»æ—¶ï¼Œéƒ½ä¸¾è¡Œé™æ——ä»ªå¼ã€‚ä½†è¿™ä¸€æ¬¡ä¸åŒï¼šæ°¸è¿œéƒ½ä¸ä¼šå†æœ‰æ¸¯ç£æ——å¸œä»è¿™é‡Œå‡èµ·äº†ã€‚4æ—¶40åˆ†ï¼Œä»£è¡¨è‹±å›½å¥³ç‹ç»Ÿæ²»äº†é¦™æ¸¯äº”å¹´çš„å½­å®šåº·ç™»ä¸Šå¸¦æœ‰çš‡å®¶æ ‡è®°çš„é»‘è‰²â€œåŠ³æ–¯è±æ–¯â€ï¼Œæœ€åä¸€æ¬¡ç¦»å¼€äº†æ¸¯ç£åºœã€‚
æ©æ˜ åœ¨ç»¿æ ‘ä¸›ä¸­çš„æ¸¯ç£åºœäº1855å¹´å»ºæˆ [6]ï¼Œåœ¨ä»¥åçš„è¿‘ä¸€ä¸ªåŠä¸–çºªä¸­ï¼ŒåŒ…æ‹¬å½­å®šåº·åœ¨å†…çš„è®¸å¤šæ¸¯ç£æ›¾å¯¹å…¶è¿›è¡Œè¿‡å¤§è§„æ¨¡æ”¹å»ºã€æ‰©å»ºå’Œè£…ä¿®ã€‚éšç€æœ«ä»£æ¸¯ç£çš„ç¦»å»ï¼Œè¿™åº§å¤å…¸é£æ ¼çš„ç™½è‰²å»ºç­‘æˆä¸ºå†å²çš„é™ˆè¿¹ã€‚
æ™š6æ—¶15åˆ†ï¼Œè±¡å¾è‹±å›½ç®¡æ²»ç»“æŸçš„å‘Šåˆ«ä»ªå¼åœ¨è·ç¦»é©»æ¸¯è‹±å†›æ€»éƒ¨ä¸è¿œçš„æ·»é©¬èˆ°å†›è¥ä¸œé¢ä¸¾è¡Œã€‚åœæ³Šåœ¨æ¸¯æ¹¾ä¸­çš„çš‡å®¶æ¸¸è½®â€œä¸åˆ—é¢ å°¼äºšâ€å·å’Œä¸´è¿‘å¤§å¦ä¸Šæ‚¬æŒ‚çš„å·¨å¹…ç´«è†èŠ±å›¾æ¡ˆï¼Œæ°å¥½æ„æˆè¿™ä¸ªâ€œæ—¥è½ä»ªå¼â€çš„èƒŒæ™¯ã€‚
æ­¤æ—¶ï¼Œé›¨è¶Šä¸‹è¶Šå¤§ã€‚æŸ¥å°”æ–¯ç‹å­åœ¨é›¨ä¸­å®£è¯»è‹±å›½å¥³ç‹ä¼Šä¸½èç™½äºŒä¸–èµ è¨€è¯´ï¼šâ€œè‹±å›½å›½æ——å°±è¦é™ä¸‹ï¼Œä¸­å›½å›½æ——å°†é£˜æ‰¬äºé¦™æ¸¯ä¸Šç©ºã€‚ä¸€ç™¾äº”åå¤šå¹´çš„è‹±å›½ç®¡æ²»å³å°†å‘Šç»ˆã€‚â€
7æ—¶45åˆ†ï¼Œå¹¿åœºä¸Šç¯ç«æ¸æš—ï¼Œå¼€å§‹äº†å½“å¤©æ¸¯å²›ä¸Šçš„ç¬¬äºŒæ¬¡é™æ——ä»ªå¼ã€‚ä¸€ç™¾äº”åå…­å¹´å‰ï¼Œä¸€ä¸ªå«çˆ±å¾·åÂ·è´å°”å½»çš„è‹±å›½èˆ°é•¿å¸¦é¢†å£«å…µå é¢†äº†æ¸¯å²›ï¼Œåœ¨è¿™é‡Œå‡èµ·äº†è‹±å›½å›½æ——ï¼›ä»Šå¤©ï¼Œå¦ä¸€åè‹±å›½æµ·å†›å£«å…µåœ¨â€œå¨å°”å£«äº²ç‹â€å†›è¥æ—çš„è¿™ä¸ªåœ°æ–¹é™ä¸‹äº†ç±³å­—æ——ã€‚
å½“ç„¶ï¼Œæœ€ä¸ºä¸–äººç©ç›®çš„æ˜¯å­å¤œæ—¶åˆ†ä¸­è‹±é¦™æ¸¯äº¤æ¥ä»ªå¼ä¸Šçš„æ˜“å¸œã€‚åœ¨1997å¹´6æœˆ30æ—¥çš„æœ€åä¸€åˆ†é’Ÿï¼Œç±³å­—æ——åœ¨é¦™æ¸¯æœ€åä¸€æ¬¡é™ä¸‹ï¼Œè‹±å›½å¯¹é¦™æ¸¯é•¿è¾¾ä¸€ä¸ªåŠä¸–çºªçš„ç»Ÿæ²»å®£å‘Šç»ˆç»“ã€‚
åœ¨æ–°çš„ä¸€å¤©æ¥ä¸´çš„ç¬¬ä¸€åˆ†é’Ÿï¼Œäº”æ˜Ÿçº¢æ——ä¼´ç€ã€Šä¹‰å‹‡å†›è¿›è¡Œæ›²ã€‹å†‰å†‰å‡èµ·ï¼Œä¸­å›½ä»æ­¤æ¢å¤å¯¹é¦™æ¸¯è¡Œä½¿ä¸»æƒã€‚ä¸æ­¤åŒæ—¶ï¼Œäº”æ˜Ÿçº¢æ——åœ¨è‹±å†›æ·»é©¬èˆ°è¥åŒºå‡èµ·ï¼Œä¸¤åˆ†é’Ÿå‰ï¼Œâ€œå¨å°”å£«äº²ç‹â€å†›è¥ï¼ˆä¸­ç¯å†›è¥ï¼‰ [7]ç§»äº¤ç»™ä¸­å›½äººæ°‘è§£æ”¾å†›ï¼Œè§£æ”¾å†›å¼€å§‹æ¥ç®¡é¦™æ¸¯é˜²åŠ¡ã€‚
0æ—¶40åˆ†ï¼Œåˆšåˆšå‚åŠ äº†äº¤æ¥ä»ªå¼çš„æŸ¥å°”æ–¯ç‹å­å’Œç¬¬28ä»»æ¸¯ç£å½­å®šåº·ç™»ä¸Šâ€œä¸åˆ—é¢ å°¼äºšâ€å·çš„ç”²æ¿ã€‚åœ¨è‹±å›½å†›èˆ°â€œæ¼†å’¸â€å·åŠæ‚¬æŒ‚ä¸­å›½å›½æ——å’Œé¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒºåŒºæ——çš„é¦™æ¸¯æ°´è­¦æ±½è‰‡æŠ¤å«ä¸‹ï¼Œå°†äº1997å¹´å¹´åº•é€€å½¹çš„â€œä¸åˆ—é¢ å°¼äºšâ€å·å¾ˆå¿«æ¶ˆå¤±åœ¨å—æµ·çš„å¤œå¹•ä¸­ã€‚
ä»1841å¹´1æœˆ26æ—¥è‹±å›½è¿œå¾å†›ç¬¬ä¸€æ¬¡å°†ç±³å­—æ——æ’ä¸Šæµ·å²›ï¼Œè‡³1997å¹´7æœˆ1æ—¥äº”æ˜Ÿçº¢æ——åœ¨é¦™æ¸¯å‡èµ·ï¼Œä¸€å…±è¿‡å»äº†ä¸€ç™¾äº”åå…­å¹´äº”ä¸ªæœˆé›¶å››å¤©ã€‚å¤§è‹±å¸å›½ä»æµ·ä¸Šæ¥ï¼Œåˆä»æµ·ä¸Šå»ã€‚
"""

# ç›®æ ‡æ¨¡å‹åˆ—è¡¨
# apis = ["qwen", "deepseek", "doubao", "xunfei"]
apis = ["xunfei"]

def run_summary(api_name: str) -> str:
    try:
        summarizer = Summary_Master(use_api=api_name, role="summarizer")
        summary = summarizer.get_summary(text)
        return f"âœ… {api_name.upper()} æ‘˜è¦ç»“æœï¼š\n{summary}"
    except Exception as e:
        return f"âŒ {api_name.upper()} è°ƒç”¨å¤±è´¥ï¼š{e}"

if __name__ == "__main__":
    print("ğŸš€ æ­£åœ¨å¹¶å‘è°ƒç”¨å¤šä¸ªæ¨¡å‹ï¼Œè¯·ç¨å€™...\n")

    with ThreadPoolExecutor(max_workers=4) as executor:
        futures = {executor.submit(run_summary, api): api for api in apis}
        for future in as_completed(futures):
            print(future.result())